<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Update NeedIt Records">51f3d7d5070430107d05f1e08c1ed072</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"54996c9b561e476196149e37981b71dc","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"54996c9b561e476196149e37981b71dc"}],"goals":[{"name":"primary","trigger_id":"54996c9b561e476196149e37981b71dc","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"I can help you find and update NeedIt records for a type of request.\", vaContext.getRequesterLang())"},"id":"b51754d810b84520bb4f1c6162a6b80e","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Ask again when you need to update other NeedIt records.\", vaContext.getRequesterLang())"},"id":"2b9dc7971add431cb300898e9c340dbc","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"bd06568dde4d4d63876209cb8d2c37e8","name":"NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"dff0e6b0bc654eefb12389f213a65eb3","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Which type of NeedIt record would you like to view?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // Return the display value (Label) for the needit_type choice\n\t    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n\t})()"},"id":"cd8ab423877e46d798bace8a93116403","name":"Confirm NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"02e3f10629cf4f7bb0d1586edef865d4","name":"NeedIt List","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"e85d8a8888ed43f38d23d6b6908976ac","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Select a NeedIt record to view.\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)","no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"You have no open NeedIt records.\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"e85d8a8888ed43f38d23d6b6908976ac","fields":["priority","short_description","u_when_needed"],"id":"1b0b7b0b2a884725b461f620ce7dc8ac","name":"NeedIt Card","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"InputPrompt","variable_id":"1c12a6ad5278485a9dcea4b4bb3cf8aa","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to view another NeedIt Record?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"428645e0ad06424dbbe9c9f4538eb821","name":"Search Again","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again=false"},"id":"809c41a3ec03439fa93b0fb73865758c","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"36bfb00f02194bb4ad6d843889cf44a7","name":"Yes"}],"id":"b1968da843714f6086eb01f114f19dba","goal_id":"primary"},{"type":"InputPrompt","variable_id":"b90dd53e389048018f48292364422936","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"When do you need the NeedIt completed?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"9b026bced3504420812bacb0769e8a9d","name":"New When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"e85d8a8888ed43f38d23d6b6908976ac","id":"7eccfbb6da3645e487621c6bd5c02fa7","name":"Change When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"e85d8a8888ed43f38d23d6b6908976ac","fields":["priority","short_description","u_when_needed"],"id":"7152f6cd5e094f1e9038690b1d2e9eb8","name":"Updated NeedIt","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"77c1d29dc4f943928a45946c39faff07","name":"Change record choice","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"d44272f9bb804488a4634d1deed7e727","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What would you like to change ?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"Update Field","branches":[{"type":"Branch","label":"Change when needed","expression":{"type":"Applicability","mode":"query","value":"change_record_choice=when needed"},"id":"0d39a80e946c4ab5a5932dd1c9005c42","name":"Change when needed"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"change_record_choice=nothing"},"id":"634c837569d44e169577821ca16ae5cd","name":"Nothing"},{"type":"Branch","label":"change short description","expression":{"type":"Applicability","mode":"query","value":"change_record_choice=short description"},"id":"9637b142e8414fde819e1552fd60ecb6","name":"change short description"}],"id":"19db1969c462454b83ca023c95dbab29","goal_id":"primary"},{"type":"InputPrompt","variable_id":"652875af4df44ea78ac99c1fbf6b3ae6","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What short description do you want to put ?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"227401f16f2e4a418553662f1d914a9e","name":"New Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"e85d8a8888ed43f38d23d6b6908976ac","id":"29d74da6c89c4b32bd5fda4c08c22e3b","name":"Change Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n\t})()","id":"68c07f9013f2471e90bc93088ec3d7ab","name":"Update search_count","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"search_count Value","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    \n\tif (vaVars.search_count &lt; 3){\n        return true;\n    }\n     \n    return false;\n})()\n"},"id":"2b6395f542d54613b809953f5344d3d7","name":"Less than 3"},{"type":"Branch","label":"3 or More","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    \n\tif (vaVars.search_count &gt;= 3){\n        return true;\n    }\n     \n    return false;\n})()\n"},"id":"de91f960af624ecd9567e4005156a958","name":"3 or More"}],"id":"30d0331375b74615ad8f1c16b998be9b","goal_id":"primary"}],"edges":[{"type":"Edge","source_node_id":"b51754d810b84520bb4f1c6162a6b80e","target_node_id":"bd06568dde4d4d63876209cb8d2c37e8","id":"e370c1d0ddca411bb1978e608569a4dc"},{"type":"Edge","source_node_id":"bd06568dde4d4d63876209cb8d2c37e8","target_node_id":"cd8ab423877e46d798bace8a93116403","id":"c092672c2c2e4a1bab8ad32f901490cb"},{"type":"Edge","source_node_id":"cd8ab423877e46d798bace8a93116403","target_node_id":"02e3f10629cf4f7bb0d1586edef865d4","id":"5e526500004e494f928de907db255e82"},{"type":"Edge","source_node_id":"02e3f10629cf4f7bb0d1586edef865d4","target_node_id":"1b0b7b0b2a884725b461f620ce7dc8ac","id":"218a219d5e7e4cb89416a038bda1a458"},{"type":"Edge","source_node_id":"428645e0ad06424dbbe9c9f4538eb821","target_node_id":"b1968da843714f6086eb01f114f19dba","id":"2ea14214487f42eda014807c79d217ba"},{"type":"Edge","source_node_id":"b1968da843714f6086eb01f114f19dba","target_node_id":"2b9dc7971add431cb300898e9c340dbc","branch_id":"809c41a3ec03439fa93b0fb73865758c","id":"0e61760788054037b3fc0de73a1b21a9","name":"809c41a3ec03439fa93b0fb73865758c"},{"type":"Edge","source_node_id":"9b026bced3504420812bacb0769e8a9d","target_node_id":"7eccfbb6da3645e487621c6bd5c02fa7","id":"9e74c0dcebb545669827aa6ef238e4b2"},{"type":"Edge","source_node_id":"7eccfbb6da3645e487621c6bd5c02fa7","target_node_id":"7152f6cd5e094f1e9038690b1d2e9eb8","id":"c0bc0be78d884b38b89c7433d35a01cd"},{"type":"Edge","source_node_id":"7152f6cd5e094f1e9038690b1d2e9eb8","target_node_id":"428645e0ad06424dbbe9c9f4538eb821","id":"d8f63fce1b994b7ab35fd9aa3ecbf3bf"},{"type":"Edge","source_node_id":"1b0b7b0b2a884725b461f620ce7dc8ac","target_node_id":"77c1d29dc4f943928a45946c39faff07","id":"00e64c41bdea4f5981b9c4346ccab6b5"},{"type":"Edge","source_node_id":"77c1d29dc4f943928a45946c39faff07","target_node_id":"19db1969c462454b83ca023c95dbab29","id":"9f50067805a644f4bd8d6d4c9a6adda5"},{"type":"Edge","source_node_id":"19db1969c462454b83ca023c95dbab29","target_node_id":"9b026bced3504420812bacb0769e8a9d","branch_id":"0d39a80e946c4ab5a5932dd1c9005c42","id":"964dbdb6f3d14710a9e6d6a1f1ada48b","name":"0d39a80e946c4ab5a5932dd1c9005c42"},{"type":"Edge","source_node_id":"19db1969c462454b83ca023c95dbab29","target_node_id":"428645e0ad06424dbbe9c9f4538eb821","branch_id":"634c837569d44e169577821ca16ae5cd","id":"00777f9b6d9041df96dc35dbb26ba720","name":"634c837569d44e169577821ca16ae5cd"},{"type":"Edge","source_node_id":"19db1969c462454b83ca023c95dbab29","target_node_id":"227401f16f2e4a418553662f1d914a9e","branch_id":"9637b142e8414fde819e1552fd60ecb6","id":"fc588e6e024e4b448b2440e0b8905c4b","name":"9637b142e8414fde819e1552fd60ecb6"},{"type":"Edge","source_node_id":"227401f16f2e4a418553662f1d914a9e","target_node_id":"29d74da6c89c4b32bd5fda4c08c22e3b","id":"0bb878a5925d462ba4cc61491b5907d1"},{"type":"Edge","source_node_id":"29d74da6c89c4b32bd5fda4c08c22e3b","target_node_id":"7152f6cd5e094f1e9038690b1d2e9eb8","id":"3f50a068f9614bf9bf61fde4021835aa"},{"type":"Edge","source_node_id":"b1968da843714f6086eb01f114f19dba","target_node_id":"68c07f9013f2471e90bc93088ec3d7ab","branch_id":"36bfb00f02194bb4ad6d843889cf44a7","id":"ac31e7e60dfc44ff8ebd30be8f8e52f4","name":"36bfb00f02194bb4ad6d843889cf44a7"},{"type":"Edge","source_node_id":"68c07f9013f2471e90bc93088ec3d7ab","target_node_id":"30d0331375b74615ad8f1c16b998be9b","id":"02361441752b40a9b986769c0d7c3411"},{"type":"Edge","source_node_id":"30d0331375b74615ad8f1c16b998be9b","target_node_id":"bd06568dde4d4d63876209cb8d2c37e8","branch_id":"2b6395f542d54613b809953f5344d3d7","id":"6fcdecdef848453a9b33c89dfdd05dc5","name":"2b6395f542d54613b809953f5344d3d7"},{"type":"Edge","source_node_id":"30d0331375b74615ad8f1c16b998be9b","target_node_id":"2b9dc7971add431cb300898e9c340dbc","branch_id":"de91f960af624ecd9567e4005156a958","id":"ebbcfaef1c634f2082456bc3781b047f","name":"de91f960af624ecd9567e4005156a958"}],"id":"primary"}],"script_variables":[{"type":"String","name":"LiveAgent_application","value":{"type":"String","mode":"string"},"id":"ff1aff587f924984a5098bd254b81a10","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"c8f9b03036fd4630b7ac7c768deff87d","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user","formatType":"text","secure":false,"sensitive":false},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"human resources"}],"id":"dff0e6b0bc654eefb12389f213a65eb3","name":"needit_type","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"x_58872_needit_needit","id":"e85d8a8888ed43f38d23d6b6908976ac","name":"needit_list","formatType":"text","secure":false,"sensitive":false},{"type":"True/False","id":"1c12a6ad5278485a9dcea4b4bb3cf8aa","name":"search_again","formatType":"text","secure":false,"sensitive":false},{"type":"Date/Time","mode":"date","id":"b90dd53e389048018f48292364422936","name":"new_when_needed_date","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"","id":"f65d5f3991884891b3ab10421088fcd9","name":"change_when_needed_date","formatType":"text","secure":false,"sensitive":false},{"type":"Choice","choices":[{"name":"Short Description","element":"short description"},{"name":"When Needed","element":"when needed"},{"name":"Nothing","element":"nothing"}],"id":"d44272f9bb804488a4634d1deed7e727","name":"change_record_choice","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"new_short_description","id":"652875af4df44ea78ac99c1fbf6b3ae6","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"Reference","table":"","id":"2b11bcabe02e40c5ad4143af2a0b48f5","name":"change_short_description","formatType":"text","secure":false,"sensitive":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"1a06a655078030107d05f1e08c1ed043","domain":"global","topic_type":"STANDARD","channels":[],"id":"eae66a55078030107d05f1e08c1ed0b7","name":"_PRVW__11f3d7d5c10430108ae2cadbe208de71","key_phrases":["Update NeedIt Records","update","Needit Request","request update"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"design_categories":[{"name":null,"visible":false,"sysId":"b1262a55078030107d05f1e08c1ed02c"}],"triggerable_by_notification":false,"auto_resolution_enabled":false,"library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>eae66a55078030107d05f1e08c1ed0b7</design_topic_id>
        <name>_PRVW__11f3d7d5c10430108ae2cadbe208de71</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-05-10 12:10:23</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>1df3d7d5070430107d05f1e08c1ed074</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_622350_needit_vi">1a06a655078030107d05f1e08c1ed043</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">1a06a655078030107d05f1e08c1ed043</sys_scope>
        <sys_update_name>sys_cb_design_topic_1df3d7d5070430107d05f1e08c1ed074</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-05-10 12:10:23</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
